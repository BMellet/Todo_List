function add(e){for(var t=0,a=document.getElementById("input"),l=a.value,n=0;n<localStorage.length;n++){if(localStorage.key(n)==l){t=1;break}}if(1==t)alert("Task exist already");else if(l){nb++;var o=moment().format("lll"),c=document.createElement("a");c.className="btn2 btn btn-small waves-effect waves-light red";var r=document.createElement("i");r.className="material-icons",r.innerHTML="clear",c.appendChild(r);var s=document.createElement("a"),i=document.createElement("input"),d=document.createElement("label"),m=document.createElement("span");m.className="date",s.className="collection-item wrap",i.type="checkbox",i.className="filled-in",i.className+=" task",i.id="task"+nb,d.setAttribute("for","task"+nb),d.innerHTML=l,m.innerHTML="creation: "+o,s.appendChild(i),s.appendChild(d),s.appendChild(m),s.appendChild(c),liste.appendChild(s),i.addEventListener("change",validate),c.addEventListener("click",suppr);var p=i.checked;console.log(o);var u={};u.d=o,u.a=p,console.log(u);var g=JSON.stringify(u);localStorage.setItem(l,g),a.value=""}else alert("Empty task not allowed");t=0,e.preventDefault()}function selector(){console.log("je suis dedans ");var e=document.getElementsByClassName("task"),t=selection.value;switch(console.log(t),t){case"1":for(var a=0;a<localStorage.length;a++)e[a].parentElement.style.display="";break;case"2":for(a=0;a<localStorage.length;a++)console.log(e[a].checked),1==e[a].checked?e[a].parentElement.style.display="none":e[a].parentElement.style.display="";break;case"3":for(var l=0;l<localStorage.length;l++)e[l].checked?e[l].parentElement.style.display="":e[l].parentElement.style.display="none"}}function validate(){var e=moment().format("lll"),t=this.checked,a=this.id,l=a.length,n=a.substring(l-1,l);console.log(n);var o=localStorage.key(n),c=localStorage.getItem(o),r=JSON.parse(c),s=r.a;s=t,r.m=e,r.a=s;var i=JSON.stringify(r);localStorage.setItem(o,i)}function suppr(){confirm("Do you really want to delete this task ?");var e=this.parentElement,t=e.firstChild.id,a=t.length,l=t.substring(a-1,a);console.log(l);var n=localStorage.key(l);localStorage.removeItem(n),liste.removeChild(e)}var btn=document.getElementById("button"),liste=document.getElementById("liste"),title=document.getElementById("input_title"),nb=0,selection=document.getElementById("select"),stor=localStorage,filtre=document.getElementsByClassName("task");selection.addEventListener("change",selector),btn.addEventListener("click",add);for(var i=0;i<localStorage.length;i++){var tache=localStorage.key(i),donnees=localStorage.getItem(tache),tabl=JSON.parse(donnees),date=tabl.d,modifDate=tabl.m,valid=tabl.a;console.log(date);var bouton=document.createElement("a");bouton.className="btn2 btn btn-small waves-effect waves-light red";var icone=document.createElement("i");icone.className="material-icons",icone.innerHTML="clear",bouton.appendChild(icone);var ancre=document.createElement("a"),NewBox=document.createElement("input"),label=document.createElement("label"),createDate=document.createElement("span");createDate.className="date",ancre.className="collection-item wrap",NewBox.type="checkbox",NewBox.className="filled-in",NewBox.className+=" task",NewBox.id="task"+i,label.setAttribute("for","task"+i),label.innerHTML=tache,createDate.innerHTML=modifDate?"Last modification: "+date:"creation: "+date,ancre.appendChild(NewBox),ancre.appendChild(label),ancre.appendChild(createDate),ancre.appendChild(bouton),liste.appendChild(ancre),NewBox.addEventListener("change",validate),bouton.addEventListener("click",suppr),1==valid&&(NewBox.checked=!0),nb=i}$(document).ready(function(){$("select").material_select(),$(".button-collapse").sideNav()});